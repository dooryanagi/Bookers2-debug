<%= form_with model:book, local:true do |f| %>

  <div class="form-group">
    <%= f.label :title %>

    <%= f.text_field :title, class: 'form-control book_title' %>
  </div>

  <div class="form-group">
    <%= f.label :opinion %>

    <%= f.text_area :body, class: 'form-control book_body' %>
  </div>

  <!--tagの入力を追加-->
  <div class="form-group">
    <%= f.label :tag %>
    <%= f.text_field :tag, class: 'form-control book_title' %>
  </div>

  <!--★評価を追加-->
  <div class="form-group">
    <div id="stars"></div>

  <script>
    // エラー回避のためキャッシュクリアを追加
    document.addEventListener("turbolinks:load",function(){
      // 星が増えてしまうエラー回避
      $('#stars').empty();
      let elem = document.querySelector('#stars');
      let opt = {
        // number:3,
        scoreName:'book[star]',
        starOn:"<%= asset_path('star-on.png') %>",
        starOff:"<%= asset_path('star-off.png') %>",
        };
        window.raty(elem, opt);
    });
  </script>

  </div>

  <div class="form-group">
    <!--デフォ→'CreateBook'-->
    <!--こうするとeditのページでもcreatbookになってしまう、、、ifか？？-->
    <!--このままで勝手に判断してくれる、素晴らしい！-->
    <%= f.submit class: 'btn btn-success btn-block' %>
  </div>

<% end %>
